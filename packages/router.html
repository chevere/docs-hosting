<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Router | Chevere</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <link rel="apple-touch-icon" href="/logo.png">
    <meta name="description" content="High quality library for building server-side software">
    <meta property="og:site_name" content="Chevere">
    <meta property="og:title" content="Router">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/packages/router.html">
    <meta name="twitter:title" content="Router">
    <meta name="twitter:url" content="/packages/router.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="preload" href="/assets/css/0.styles.0f7b7e19.css" as="style"><link rel="preload" href="/assets/js/app.d34653bd.js" as="script"><link rel="preload" href="/assets/js/2.b3d98ebb.js" as="script"><link rel="preload" href="/assets/js/1.cbf95cfe.js" as="script"><link rel="preload" href="/assets/js/44.bf84ff95.js" as="script"><link rel="prefetch" href="/assets/js/10.ce1ffa88.js"><link rel="prefetch" href="/assets/js/11.19c30390.js"><link rel="prefetch" href="/assets/js/12.63244053.js"><link rel="prefetch" href="/assets/js/13.7278834f.js"><link rel="prefetch" href="/assets/js/14.ddbbd723.js"><link rel="prefetch" href="/assets/js/15.951b87f8.js"><link rel="prefetch" href="/assets/js/16.22953f39.js"><link rel="prefetch" href="/assets/js/17.37cdd360.js"><link rel="prefetch" href="/assets/js/18.ac720a26.js"><link rel="prefetch" href="/assets/js/19.265c60db.js"><link rel="prefetch" href="/assets/js/20.b5e0f461.js"><link rel="prefetch" href="/assets/js/21.f8a5d0fc.js"><link rel="prefetch" href="/assets/js/22.c7db5a2e.js"><link rel="prefetch" href="/assets/js/23.a460b2d2.js"><link rel="prefetch" href="/assets/js/24.86dbe629.js"><link rel="prefetch" href="/assets/js/25.c73b6e9d.js"><link rel="prefetch" href="/assets/js/26.f000397d.js"><link rel="prefetch" href="/assets/js/27.b31a4070.js"><link rel="prefetch" href="/assets/js/28.496ebfd9.js"><link rel="prefetch" href="/assets/js/29.05fbe802.js"><link rel="prefetch" href="/assets/js/3.f1e808b9.js"><link rel="prefetch" href="/assets/js/30.71265950.js"><link rel="prefetch" href="/assets/js/31.e70afbfe.js"><link rel="prefetch" href="/assets/js/32.cfb0ea4f.js"><link rel="prefetch" href="/assets/js/33.1a8363dd.js"><link rel="prefetch" href="/assets/js/34.fffa1c28.js"><link rel="prefetch" href="/assets/js/35.34dbf8b8.js"><link rel="prefetch" href="/assets/js/36.7dadbdad.js"><link rel="prefetch" href="/assets/js/37.04acf26c.js"><link rel="prefetch" href="/assets/js/38.445c0cf6.js"><link rel="prefetch" href="/assets/js/39.8f93d2ef.js"><link rel="prefetch" href="/assets/js/4.17348ca1.js"><link rel="prefetch" href="/assets/js/40.17367ac9.js"><link rel="prefetch" href="/assets/js/41.84fecf3f.js"><link rel="prefetch" href="/assets/js/42.f05895a0.js"><link rel="prefetch" href="/assets/js/43.3f60a48f.js"><link rel="prefetch" href="/assets/js/45.707dd8ea.js"><link rel="prefetch" href="/assets/js/46.e9f9b4e0.js"><link rel="prefetch" href="/assets/js/47.f72248a4.js"><link rel="prefetch" href="/assets/js/48.6d6f2739.js"><link rel="prefetch" href="/assets/js/49.26c317d9.js"><link rel="prefetch" href="/assets/js/5.e159fa16.js"><link rel="prefetch" href="/assets/js/50.fc323f0d.js"><link rel="prefetch" href="/assets/js/51.dff8e62e.js"><link rel="prefetch" href="/assets/js/52.78353147.js"><link rel="prefetch" href="/assets/js/53.b63a6e35.js"><link rel="prefetch" href="/assets/js/54.229b25c6.js"><link rel="prefetch" href="/assets/js/6.e3ac936f.js"><link rel="prefetch" href="/assets/js/7.8fcd73e7.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.92fa0d62.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0f7b7e19.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Chevere" class="logo"> <span class="site-name can-hide">Chevere</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/introduction/" class="nav-link">
  Intro
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Packages Menu" class="dropdown-title"><span class="title">Packages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Packages Menu" class="mobile-dropdown-title"><span class="title">Packages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/packages/action.html" class="nav-link">
  Action
</a></li><li class="dropdown-item"><!----> <a href="/packages/container.html" class="nav-link">
  Container
</a></li><li class="dropdown-item"><!----> <a href="/packages/data-structure.html" class="nav-link">
  DataStructure
</a></li><li class="dropdown-item"><!----> <a href="/packages/filesystem.html" class="nav-link">
  Filesystem
</a></li><li class="dropdown-item"><!----> <a href="/packages/http.html" class="nav-link">
  Http
</a></li><li class="dropdown-item"><!----> <a href="/packages/message.html" class="nav-link">
  Message
</a></li><li class="dropdown-item"><!----> <a href="/packages/parameter.html" class="nav-link">
  Parameter
</a></li><li class="dropdown-item"><!----> <a href="/packages/regex.html" class="nav-link">
  Regex
</a></li><li class="dropdown-item"><!----> <a href="/packages/router.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Router
</a></li><li class="dropdown-item"><!----> <a href="/packages/schwager.html" class="nav-link">
  Schwager
</a></li><li class="dropdown-item"><!----> <a href="/packages/sql2p.html" class="nav-link">
  SQL2P
</a></li><li class="dropdown-item"><!----> <a href="/packages/standard.html" class="nav-link">
  Standard
</a></li><li class="dropdown-item"><!----> <a href="/packages/throwable-handler.html" class="nav-link">
  ThrowableHandler
</a></li><li class="dropdown-item"><!----> <a href="/packages/trace.html" class="nav-link">
  Trace
</a></li><li class="dropdown-item"><!----> <a href="/packages/var-dump.html" class="nav-link">
  VarDump
</a></li><li class="dropdown-item"><!----> <a href="/packages/var-support.html" class="nav-link">
  VarSupport
</a></li><li class="dropdown-item"><!----> <a href="/packages/workflow.html" class="nav-link">
  Workflow
</a></li><li class="dropdown-item"><!----> <a href="/packages/writer.html" class="nav-link">
  Writer
</a></li><li class="dropdown-item"><!----> <a href="/packages/xrdebug.html" class="nav-link">
  xrDebug
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Dev Menu" class="dropdown-title"><span class="title">Dev</span> <span class="arrow down"></span></button> <button type="button" aria-label="Dev Menu" class="mobile-dropdown-title"><span class="title">Dev</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Standard
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/developer/standard/quality.html" class="nav-link">
  Quality
</a></li><li class="dropdown-subitem"><a href="/developer/standard/coding.html" class="nav-link">
  Coding
</a></li><li class="dropdown-subitem"><a href="/developer/standard/immutability.html" class="nav-link">
  Immutability
</a></li><li class="dropdown-subitem"><a href="/developer/standard/testing.html" class="nav-link">
  Testing
</a></li></ul></li><li class="dropdown-item"><h4>
          Spec
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/developer/spec/interfaces.html" class="nav-link">
  Interfaces
</a></li><li class="dropdown-subitem"><a href="/developer/spec/components.html" class="nav-link">
  Components
</a></li></ul></li><li class="dropdown-item"><h4>
          Environment
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/developer/environment/system.html" class="nav-link">
  System
</a></li><li class="dropdown-subitem"><a href="/developer/environment/workspace.html" class="nav-link">
  Workspace
</a></li></ul></li></ul></div></div> <a href="https://github.com/chevere/chevere" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/introduction/" class="nav-link">
  Intro
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Packages Menu" class="dropdown-title"><span class="title">Packages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Packages Menu" class="mobile-dropdown-title"><span class="title">Packages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/packages/action.html" class="nav-link">
  Action
</a></li><li class="dropdown-item"><!----> <a href="/packages/container.html" class="nav-link">
  Container
</a></li><li class="dropdown-item"><!----> <a href="/packages/data-structure.html" class="nav-link">
  DataStructure
</a></li><li class="dropdown-item"><!----> <a href="/packages/filesystem.html" class="nav-link">
  Filesystem
</a></li><li class="dropdown-item"><!----> <a href="/packages/http.html" class="nav-link">
  Http
</a></li><li class="dropdown-item"><!----> <a href="/packages/message.html" class="nav-link">
  Message
</a></li><li class="dropdown-item"><!----> <a href="/packages/parameter.html" class="nav-link">
  Parameter
</a></li><li class="dropdown-item"><!----> <a href="/packages/regex.html" class="nav-link">
  Regex
</a></li><li class="dropdown-item"><!----> <a href="/packages/router.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Router
</a></li><li class="dropdown-item"><!----> <a href="/packages/schwager.html" class="nav-link">
  Schwager
</a></li><li class="dropdown-item"><!----> <a href="/packages/sql2p.html" class="nav-link">
  SQL2P
</a></li><li class="dropdown-item"><!----> <a href="/packages/standard.html" class="nav-link">
  Standard
</a></li><li class="dropdown-item"><!----> <a href="/packages/throwable-handler.html" class="nav-link">
  ThrowableHandler
</a></li><li class="dropdown-item"><!----> <a href="/packages/trace.html" class="nav-link">
  Trace
</a></li><li class="dropdown-item"><!----> <a href="/packages/var-dump.html" class="nav-link">
  VarDump
</a></li><li class="dropdown-item"><!----> <a href="/packages/var-support.html" class="nav-link">
  VarSupport
</a></li><li class="dropdown-item"><!----> <a href="/packages/workflow.html" class="nav-link">
  Workflow
</a></li><li class="dropdown-item"><!----> <a href="/packages/writer.html" class="nav-link">
  Writer
</a></li><li class="dropdown-item"><!----> <a href="/packages/xrdebug.html" class="nav-link">
  xrDebug
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Dev Menu" class="dropdown-title"><span class="title">Dev</span> <span class="arrow down"></span></button> <button type="button" aria-label="Dev Menu" class="mobile-dropdown-title"><span class="title">Dev</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Standard
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/developer/standard/quality.html" class="nav-link">
  Quality
</a></li><li class="dropdown-subitem"><a href="/developer/standard/coding.html" class="nav-link">
  Coding
</a></li><li class="dropdown-subitem"><a href="/developer/standard/immutability.html" class="nav-link">
  Immutability
</a></li><li class="dropdown-subitem"><a href="/developer/standard/testing.html" class="nav-link">
  Testing
</a></li></ul></li><li class="dropdown-item"><h4>
          Spec
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/developer/spec/interfaces.html" class="nav-link">
  Interfaces
</a></li><li class="dropdown-subitem"><a href="/developer/spec/components.html" class="nav-link">
  Components
</a></li></ul></li><li class="dropdown-item"><h4>
          Environment
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/developer/environment/system.html" class="nav-link">
  System
</a></li><li class="dropdown-subitem"><a href="/developer/environment/workspace.html" class="nav-link">
  Workspace
</a></li></ul></li></ul></div></div> <a href="https://github.com/chevere/chevere" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Router</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/packages/router.html#summary" class="sidebar-link">Summary</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/packages/router.html#installing" class="sidebar-link">Installing</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/packages/router.html#quick-start" class="sidebar-link">Quick start</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/packages/router.html#what-it-does" class="sidebar-link">What it does</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/packages/router.html#bind" class="sidebar-link">Bind</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/packages/router.html#headless" class="sidebar-link">Headless</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/packages/router.html#route" class="sidebar-link">Route</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/packages/router.html#view-route" class="sidebar-link">View route</a></li><li class="sidebar-sub-header"><a href="/packages/router.html#headless-route" class="sidebar-link">Headless route</a></li><li class="sidebar-sub-header"><a href="/packages/router.html#dynamic-route" class="sidebar-link">Dynamic route</a></li><li class="sidebar-sub-header"><a href="/packages/router.html#the-view-argument" class="sidebar-link">The view argument</a></li><li class="sidebar-sub-header"><a href="/packages/router.html#the-middleware-argument" class="sidebar-link">The middleware argument</a></li><li class="sidebar-sub-header"><a href="/packages/router.html#the-exclude-argument" class="sidebar-link">The exclude argument</a></li></ul></li><li><a href="/packages/router.html#middlewares" class="sidebar-link">Middlewares</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/packages/router.html#routes" class="sidebar-link">Routes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/packages/router.html#managing-routes" class="sidebar-link">Managing routes</a></li><li class="sidebar-sub-header"><a href="/packages/router.html#middleware-pipelines" class="sidebar-link">Middleware pipelines</a></li></ul></li><li><a href="/packages/router.html#views" class="sidebar-link">Views</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/packages/router.html#container" class="sidebar-link">Container</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/packages/router.html#adding-entries" class="sidebar-link">Adding entries</a></li><li class="sidebar-sub-header"><a href="/packages/router.html#accessing-entries" class="sidebar-link">Accessing entries</a></li><li class="sidebar-sub-header"><a href="/packages/router.html#automatic-dependency-injection" class="sidebar-link">Automatic dependency injection</a></li></ul></li><li><a href="/packages/router.html#dependencies" class="sidebar-link">Dependencies</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/packages/router.html#assert-dependencies" class="sidebar-link">Assert dependencies</a></li></ul></li><li><a href="/packages/router.html#routed" class="sidebar-link">Routed</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/packages/router.html#late-dependency-injection" class="sidebar-link">Late dependency injection</a></li><li class="sidebar-sub-header"><a href="/packages/router.html#routed-outcome" class="sidebar-link">Routed outcome</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="router"><a href="#router" class="header-anchor">#</a> Router</h1> <h2 id="summary"><a href="#summary" class="header-anchor">#</a> Summary</h2> <p>Router is a library for creating routing systems for <a href="https://chevere.org/packages/http" target="_blank" rel="noopener noreferrer">chevere/http<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It is compatible with the following <a href="https://www.php-fig.org" target="_blank" rel="noopener noreferrer">PHP-FIG<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> PSR:</p> <ul><li>PSR-7: HTTP message interfaces</li> <li>PSR-11: Container interface</li> <li>PSR-15: HTTP Server Request Handlers</li> <li>PSR-17: HTTP Factories</li></ul> <h2 id="installing"><a href="#installing" class="header-anchor">#</a> Installing</h2> <p>Router is available through <a href="https://packagist.org/packages/chevere/router" target="_blank" rel="noopener noreferrer">Packagist<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and the repository source is at <a href="https://github.com/chevere/router" target="_blank" rel="noopener noreferrer">chevere/router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">composer</span> require chevere/router
</code></pre></div><h2 id="quick-start"><a href="#quick-start" class="header-anchor">#</a> Quick start</h2> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Define routes</span>
<span class="token variable">$routes</span> <span class="token operator">=</span> <span class="token function">routes</span><span class="token punctuation">(</span>
    <span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/hello'</span><span class="token punctuation">,</span> <span class="token argument-name">GET</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">'hello.twig'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/api/users'</span><span class="token punctuation">,</span>
        <span class="token argument-name">GET</span><span class="token punctuation">:</span> <span class="token class-name static-context">UserListController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token argument-name">POST</span><span class="token punctuation">:</span> <span class="token function">headless</span><span class="token punctuation">(</span><span class="token class-name static-context">UserCreateController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name static-context">CsrfMiddleware</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/products/{id}'</span><span class="token punctuation">,</span>
        <span class="token argument-name">GET</span><span class="token punctuation">:</span> <span class="token function">bind</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'product.twig'</span><span class="token punctuation">,</span> <span class="token class-name static-context">ProductGetController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token argument-name">PUT</span><span class="token punctuation">:</span> <span class="token class-name static-context">ProductUpdateController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token argument-name">DELETE</span><span class="token punctuation">:</span> <span class="token class-name static-context">ProductDeleteController</span><span class="token operator">::</span><span class="token keyword">class</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Create router</span>
<span class="token variable">$router</span> <span class="token operator">=</span> <span class="token function">router</span><span class="token punctuation">(</span><span class="token variable">$routes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Handle request</span>
<span class="token variable">$routed</span> <span class="token operator">=</span> <span class="token variable">$router</span><span class="token operator">-&gt;</span><span class="token function">routed</span><span class="token punctuation">(</span><span class="token variable">$serverRequest</span><span class="token punctuation">,</span> <span class="token variable">$responseFactory</span><span class="token punctuation">,</span> <span class="token variable">$container</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$routed</span><span class="token operator">-&gt;</span><span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$return</span> <span class="token operator">=</span> <span class="token variable">$routed</span><span class="token operator">-&gt;</span><span class="token function">return</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Controller return value</span>
</code></pre></div><h2 id="what-it-does"><a href="#what-it-does" class="header-anchor">#</a> What it does</h2> <p>The Router library allows you to bind paths to HTTP methods and logic. It maps paths to their corresponding HTTP controller actions, views, and middleware pipelines. It also collects and validates the views and dependencies used in the routing process.</p> <p>For example, to resolve this:</p> <div class="language-plain extra-class"><pre class="language-plain"><code>GET /product/123
    -&gt; ProductGet-&gt;__invoke(123):context
    -&gt; product.twig

DELETE /product/123
    -&gt; ProductDelete-&gt;__invoke(123)
</code></pre></div><p>You need to write the following route code:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$route</span> <span class="token operator">=</span> <span class="token function">route</span><span class="token punctuation">(</span>
    <span class="token string single-quoted-string">'/product/{id}'</span><span class="token punctuation">,</span>
    <span class="token argument-name">GET</span><span class="token punctuation">:</span> <span class="token function">bind</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'product.twig'</span><span class="token punctuation">,</span> <span class="token class-name static-context">ProductGet</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token argument-name">DELETE</span><span class="token punctuation">:</span> <span class="token class-name static-context">ProductDelete</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>And the HTTP controllers may look like this:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name-definition class-name">ProductGet</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__invoke</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">return</span> <span class="token variable">$context</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">ProductDelete</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__invoke</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="bind"><a href="#bind" class="header-anchor">#</a> Bind</h2> <p>A Bind is the conjunction of a controller, its middleware pipeline and a view. Use helper function <code>bind($view, $controller, ...$middleware)</code> to explicitly create a binding.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$bind</span> <span class="token operator">=</span> <span class="token function">bind</span><span class="token punctuation">(</span>
    <span class="token argument-name">view</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">'product.twig'</span><span class="token punctuation">,</span>
    <span class="token argument-name">controller</span><span class="token punctuation">:</span> <span class="token class-name static-context">ProductGet</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token variable">$middleware</span> <span class="token comment">// PSR-15</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Use method <code>controllerName()</code> to access the ControllerName API.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$bind</span><span class="token operator">-&gt;</span><span class="token function">controllerName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ProductGet</span>
</code></pre></div><p>Use method <code>view()</code> to access the view string.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$bind</span><span class="token operator">-&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// product.twig</span>
</code></pre></div><p>Use method <code>middlewares()</code> to access the Middlewares collection API.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$bind</span><span class="token operator">-&gt;</span><span class="token function">middlewares</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="headless"><a href="#headless" class="header-anchor">#</a> Headless</h2> <p>Use helper function <code>headless($controller, ...$middleware)</code> to define a <a href="#bind">bind</a> without a view, only the controller and middleware.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">headless</span><span class="token punctuation">(</span><span class="token class-name static-context">ProductGet</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token variable">$middleware</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="route"><a href="#route" class="header-anchor">#</a> Route</h2> <p>Use the helper function <code>route($path, ...)</code> to define path endpoints. An endpoint is defined as the conjunction of a path, an HTTP method  and a controller.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/hello-world'</span><span class="token punctuation">,</span> <span class="token argument-name">GET</span><span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">,</span> <span class="token argument-name">POST</span><span class="token punctuation">:</span> <span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="view-route"><a href="#view-route" class="header-anchor">#</a> View route</h3> <p>When no controller is needed you can bind the HTTP method to the target view, without indicating a controller.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/'</span><span class="token punctuation">,</span> <span class="token argument-name">GET</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">'home.twig'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="headless-route"><a href="#headless-route" class="header-anchor">#</a> Headless route</h3> <p>When no view is needed you can bind the HTTP method to the target controller, without indicating a view.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">route</span><span class="token punctuation">(</span>
    <span class="token string single-quoted-string">'/product/{id}'</span><span class="token punctuation">,</span>
    <span class="token argument-name">DELETE</span><span class="token punctuation">:</span> <span class="token class-name static-context">ProductDelete</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="dynamic-route"><a href="#dynamic-route" class="header-anchor">#</a> Dynamic route</h3> <p>Dynamic routes use variable wildcards (<code>{variable}</code> syntax) to denote variable path components.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">route</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/products/{id}'</span><span class="token punctuation">,</span> <span class="token argument-name">GET</span><span class="token punctuation">:</span> <span class="token class-name static-context">MyController</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Where <code>MyController</code> class method <code>__invoke()</code> parameters must match the defined wildcards:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__invoke</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div><p>Path variables implicit match against <code>[^/]+</code>. To customize use <code>StringAttr</code> on mainâ€™s function parameters.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Chevere<span class="token punctuation">\</span>Parameter<span class="token punctuation">\</span>Attributes<span class="token punctuation">\</span>StringAttr</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__invoke</span><span class="token punctuation">(</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span class="token attribute-content"><span class="token attribute-class-name class-name">StringAttr</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/\d+/'</span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword type-declaration">string</span> <span class="token variable">$id</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// $id is digits only</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="the-view-argument"><a href="#the-view-argument" class="header-anchor">#</a> The <code>view</code> argument</h3> <p>Use the <code>view</code> argument to define the same view for all endpoints.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">route</span><span class="token punctuation">(</span>
    <span class="token string single-quoted-string">'/login'</span><span class="token punctuation">,</span>
    <span class="token argument-name">view</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">'login.twig'</span><span class="token punctuation">,</span>
    <span class="token argument-name">GET</span><span class="token punctuation">:</span> <span class="token class-name static-context">LoginGet</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token argument-name">POST</span><span class="token punctuation">:</span> <span class="token class-name static-context">LoginPost</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Use helpers like <code>bind()</code> or <code>headless()</code> to override the base <code>view</code> argument definition.</p> <h3 id="the-middleware-argument"><a href="#the-middleware-argument" class="header-anchor">#</a> The <code>middleware</code> argument</h3> <p>Use the <code>middleware</code> argument to define the same middleware pipeline for all endpoints.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">route</span><span class="token punctuation">(</span>
    <span class="token string single-quoted-string">'/signup'</span><span class="token punctuation">,</span>
    <span class="token argument-name">view</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">'signup.twig'</span><span class="token punctuation">,</span>
    <span class="token argument-name">middleware</span><span class="token punctuation">:</span> <span class="token function">middlewares</span><span class="token punctuation">(</span>
        <span class="token class-name static-context">RedirectIfLogged</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// PSR-15</span>
        <span class="token class-name static-context">TurnstileVerify</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// PSR-15</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token argument-name">GET</span><span class="token punctuation">:</span> <span class="token class-name static-context">SignUpGet</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token argument-name">POST</span><span class="token punctuation">:</span> <span class="token class-name static-context">SignUpPost</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Use helpers like <code>bind()</code> or <code>headless()</code> to override the base <code>middleware</code> argument definition.</p> <h3 id="the-exclude-argument"><a href="#the-exclude-argument" class="header-anchor">#</a> The <code>exclude</code> argument</h3> <p>The <code>exclude</code> argument enables to define middleware names that should be excluded from the pipeline.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">route</span><span class="token punctuation">(</span>
    <span class="token string single-quoted-string">'/logout'</span><span class="token punctuation">,</span>
    <span class="token argument-name">exclude</span><span class="token punctuation">:</span> <span class="token function">middlewares</span><span class="token punctuation">(</span>
        <span class="token class-name static-context">TurnstileVerify</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// PSR-15</span>
        <span class="token class-name static-context">ChallengeTwoFactor</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// PSR-15</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token argument-name">POST</span><span class="token punctuation">:</span> <span class="token class-name static-context">LogoutPost</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="middlewares"><a href="#middlewares" class="header-anchor">#</a> Middlewares</h2> <p>The Middlewares API enables you to organize PSR-15 middleware for your routes. Use the helper function <code>middlewares(...$middleware)</code> to create a Middlewares collection.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$middlewares</span> <span class="token operator">=</span> <span class="token function">middlewares</span><span class="token punctuation">(</span>
    <span class="token class-name static-context">SessionMiddleware</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token class-name static-context">AuthMiddleware</span><span class="token operator">::</span><span class="token keyword">class</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can use this collection in route definitions to apply middleware to specific routes.</p> <h2 id="routes"><a href="#routes" class="header-anchor">#</a> Routes</h2> <p>The Routes API enables to collect, assert, inspect and organize Route objects.</p> <p>Use helper function <code>routes(...$route|$routes)</code> to create a Routes object.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$routes</span> <span class="token operator">=</span> <span class="token function">routes</span><span class="token punctuation">(</span>
    <span class="token function">route</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">routes</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="managing-routes"><a href="#managing-routes" class="header-anchor">#</a> Managing routes</h3> <p>Use method <code>withRoute(...$route)</code> to add Route objects, use method <code>withRoutes(...$routes)</code> to add Routes objects.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$routes</span> <span class="token operator">=</span> <span class="token variable">$routes</span><span class="token operator">-&gt;</span><span class="token function">withRoute</span><span class="token punctuation">(</span><span class="token variable">$route</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$routes</span> <span class="token operator">=</span> <span class="token variable">$routes</span><span class="token operator">-&gt;</span><span class="token function">withRoutes</span><span class="token punctuation">(</span><span class="token variable">$moreRoutes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Use method <code>has(...$path)</code> to tell if the path is already routed. Use <code>get($path)</code> to retrieve the route for a given path.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$routes</span> <span class="token operator">=</span> <span class="token variable">$routes</span><span class="token operator">-&gt;</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/pricing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bool</span>
<span class="token variable">$home</span> <span class="token operator">=</span> <span class="token variable">$routes</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/pricing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// RouteInterface</span>
</code></pre></div><h3 id="middleware-pipelines"><a href="#middleware-pipelines" class="header-anchor">#</a> Middleware pipelines</h3> <p>Use method <code>withPrependMiddleware($midlewares)</code> to prepend middleware to the begin of the pipeline. Use this for middleware that must resolve early in execution order.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$routes</span> <span class="token operator">=</span> <span class="token variable">$routes</span><span class="token operator">-&gt;</span><span class="token function">withPrependMiddleware</span><span class="token punctuation">(</span>
    <span class="token function">middlewares</span><span class="token punctuation">(</span>
        <span class="token class-name static-context">SessionSetUpCSRFToken</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// PSR-15</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Use method <code>withAppendMiddleware($middlewares)</code> to append middleware to the end of the pipeline. Use this for middleware that must resolve last in execution order.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$routes</span> <span class="token operator">=</span> <span class="token variable">$routes</span><span class="token operator">-&gt;</span><span class="token function">withAppendMiddleware</span><span class="token punctuation">(</span>
    <span class="token function">middlewares</span><span class="token punctuation">(</span>
        <span class="token class-name static-context">SessionCheckCSRFToken</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token comment">// PSR-15</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="views"><a href="#views" class="header-anchor">#</a> Views</h2> <p>The Views API enables to assert the views collected for all routes. Use <code>assert($viewsDir)</code> method to assert that the views directory contains the view names defined in routes.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$router</span><span class="token operator">-&gt;</span><span class="token function">views</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">assert</span><span class="token punctuation">(</span><span class="token variable">$viewsDir</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="container"><a href="#container" class="header-anchor">#</a> Container</h2> <p>Use <code>new Container(...)</code> to create the dependency container by passing entries you may need to manually create.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$container</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
    <span class="token argument-name">database</span><span class="token punctuation">:</span> <span class="token variable">$database</span><span class="token punctuation">,</span>
    <span class="token comment">// other entries</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="adding-entries"><a href="#adding-entries" class="header-anchor">#</a> Adding entries</h3> <p>Use method <code>with(...$entries)</code> to add one or more named entries to the container.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$container</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">with</span><span class="token punctuation">(</span>
    <span class="token argument-name">status</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">'challenged'</span><span class="token punctuation">,</span>
    <span class="token argument-name">challenge</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">'2fa'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="accessing-entries"><a href="#accessing-entries" class="header-anchor">#</a> Accessing entries</h3> <p>Use method <code>has($name)</code> to tell if the container has an entry by name. Use method <code>get($name)</code> to retrieve the entry value.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'session'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bool true</span>
<span class="token variable">$session</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'session'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// SessionInterface</span>
</code></pre></div><h3 id="automatic-dependency-injection"><a href="#automatic-dependency-injection" class="header-anchor">#</a> Automatic dependency injection</h3> <p>Use method <code>withAutoInject($deps, ...$ignore)</code> to automatically inject missing dependencies recursively.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$container</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">withAutoInject</span><span class="token punctuation">(</span><span class="token variable">$deps</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token variable">$ignore</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>ignore</code> argument allows you to define dependencies that should be ignored, which is useful for dependencies that must be <a href="#late-dependency-injection">late injected</a> after the middleware pipeline resolves.</p> <h2 id="dependencies"><a href="#dependencies" class="header-anchor">#</a> Dependencies</h2> <p>The Dependencies API enables to interact with the dependencies detected for all routing participants. The Router will collect every <code>__construct</code> on both controllers and middleware, to provide a collection where you can use your own dependency injection logic.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$deps</span> <span class="token operator">=</span> <span class="token variable">$router</span><span class="token operator">-&gt;</span><span class="token function">dependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="assert-dependencies"><a href="#assert-dependencies" class="header-anchor">#</a> Assert dependencies</h3> <p>Use method <code>assert($container)</code> to assert that the PSR-11 <code>$container</code> meets the required dependencies.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$deps</span><span class="token operator">-&gt;</span><span class="token function">assert</span><span class="token punctuation">(</span><span class="token variable">$container</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This is an additional guard that can be used to static detect missing dependencies. On runtime, the system will throw an exception before even reach the middleware layer.</p> <h2 id="routed"><a href="#routed" class="header-anchor">#</a> Routed</h2> <p>The Routed API enables to interact with the outcome result of the routing process. Use method <code>routed(...)</code> to resolve routing.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$routed</span> <span class="token operator">=</span> <span class="token variable">$router</span><span class="token operator">-&gt;</span><span class="token function">routed</span><span class="token punctuation">(</span>
    <span class="token variable">$serverRequest</span><span class="token punctuation">,</span>   <span class="token comment">// PSR-7</span>
    <span class="token variable">$responseFactory</span><span class="token punctuation">,</span> <span class="token comment">// PSR-17</span>
    <span class="token variable">$container</span><span class="token punctuation">,</span>       <span class="token comment">// PSR-11</span>
    <span class="token variable">$callback</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="late-dependency-injection"><a href="#late-dependency-injection" class="header-anchor">#</a> Late dependency injection</h3> <p>The <code>$callback</code> argument enables to pass logic that will resolve after the middleware pipeline and before the controller layer.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Chevere<span class="token punctuation">\</span>Router<span class="token punctuation">\</span>Interfaces<span class="token punctuation">\</span>ContainerInterface</span><span class="token punctuation">;</span>

<span class="token variable">$callback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">ContainerInterface</span> <span class="token variable">$container</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">ContainerInterface</span> <span class="token punctuation">{</span>
    <span class="token variable">$session</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'sessionFactory'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">newSession</span><span class="token punctuation">(</span>
        <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'requestUser'</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token property">sessionId</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">with</span><span class="token punctuation">(</span>
        <span class="token argument-name">session</span><span class="token punctuation">:</span> <span class="token variable">$session</span><span class="token punctuation">,</span>
        <span class="token argument-name">user</span><span class="token punctuation">:</span> <span class="token variable">$session</span><span class="token operator">-&gt;</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'user'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="routed-outcome"><a href="#routed-outcome" class="header-anchor">#</a> Routed outcome</h3> <p>Use method <code>hasThrowable()</code> to tell if routing throws an exception. Use method <code>throwable()</code> to access the exception (if any).</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$hasThrowable</span> <span class="token operator">=</span> <span class="token variable">$routed</span><span class="token operator">-&gt;</span><span class="token function">hasThrowable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bool</span>
<span class="token variable">$throwable</span> <span class="token operator">=</span> <span class="token variable">$routed</span><span class="token operator">-&gt;</span><span class="token function">throwable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The system is flexible as it enables to define catch-all strategies. For example, you may want to catch <code>ControllerException</code> objects and pass-by everything else.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$routed</span><span class="token operator">-&gt;</span><span class="token function">hasThrowable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span> <span class="token punctuation">(</span><span class="token variable">$routed</span><span class="token operator">-&gt;</span><span class="token function">throwable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">ControllerException</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token variable">$routed</span><span class="token operator">-&gt;</span><span class="token function">throwable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Use method <code>response()</code> to access the routed PSR-7 response object.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$psr7Response</span> <span class="token operator">=</span> <span class="token variable">$routed</span><span class="token operator">-&gt;</span><span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Use method <code>bind()</code> to access the routed <a href="#bind">Bind</a> API, which enables to tell the controller, view and middleware.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$bind</span> <span class="token operator">=</span> <span class="token variable">$routed</span><span class="token operator">-&gt;</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Use method <code>return()</code> to access to the controller return value. This is the value after Action I/O guard layer.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$controllerReturn</span> <span class="token operator">=</span> <span class="token variable">$routed</span><span class="token operator">-&gt;</span><span class="token function">return</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/chevere/docs/edit/main/packages/router.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d34653bd.js" defer></script><script src="/assets/js/2.b3d98ebb.js" defer></script><script src="/assets/js/1.cbf95cfe.js" defer></script><script src="/assets/js/44.bf84ff95.js" defer></script>
  </body>
</html>
